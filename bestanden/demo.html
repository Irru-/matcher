<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <meta name="google-site-verification" content="jD7G7Ednk6nQ8Mw-UPZ2OwvTGyQ_WIn_DqFb87RjA70" />
    <title>Nokogiri</title>
  </head>
  <body class="container">
    <div class="column span-24">

      <header>
        <form action="/search" class="column span-12" id="site_search" method="get">
          <input class="ghosted" data-ghost="Search Site" id="q" name="q" type="text" value="Search Site" />
          <button>Search</button>
        </form>


        <dl id="urls" class="column span-12 last">
          <dt>Install</dt>
          <dd>sudo gem install nokogiri</dd>

          <dt>Contribute</dt>
          <dd><a href="http://github.com/sparklemotion/nokogiri">github.com/sparklemotion/nokogiri</a></dd>
        </dl><!-- #urls -->

        <h2 class="alt">An <abbr title="HyperText Markup Language">HTML</abbr>, <abbr title="eXtensible Markup Language">XML</abbr>, <abbr title="Simple API for XML">SAX</abbr>, <abbr class="alt">&amp;</abbr> Reader parser with the ability to search documents via <abbr title="XML Path Language">XPath</abbr> or <abbr title="Cascading Style Sheets">CSS3</abbr> selectors&hellip; and much more</h2>

        <h1>
          <a href="/">
            <abbr title="Japanese for 'handsaw'">
              <span class="english">Nokogi<span class="ri">ri</span></span>
              <span class="japanese">鋸</span>
            </abbr>
          </a>
        </h1>

        <nav>
          <ul>
            <li><a href="/tutorials/installing_nokogiri.html" title="Installing Nokogiri">Installation</a></li>
            <li><a href="/tutorials" title="Examples of How to Use Nokogiri">Tutorials</a></li>
            <li><a href="/tutorials/getting_help.html" title="Getting Help and Reporting Issues">Getting Help</a></li>
          </ul>
        </nav>
      </header>


      <div id="sidebar" class="column span-8">
        <nav class="classes section">
          <h4>Files</h4>
          <span class="toggle_list">
            <a href="#" data-toggle="files_nav">
              Hide
            </a>
          </span>

          <div id="files_nav">
            <ul id="files_nav">
              
                <li><a href="/C_CODING_STYLE_rdoc.html">C_CODING_STYLE.rdoc</a></li>
              
                <li><a href="/CHANGELOG_ja_rdoc.html">CHANGELOG.ja.rdoc</a></li>
              
                <li><a href="/CHANGELOG_rdoc.html">CHANGELOG.rdoc</a></li>
              
                <li><a href="/Manifest_txt.html">Manifest.txt</a></li>
              
                <li><a href="/README_ja_rdoc.html">README.ja.rdoc</a></li>
              
                <li><a href="/README_rdoc.html">README.rdoc</a></li>
              
            </ul>
          </div>
        </nav>
        <nav class="classes section">
          <h4>Classes</h4>
          <span class="toggle_list">
            <a href="#" data-toggle="class_nav">
              Hide
            </a>
          </span>

          <div id="class_nav">
            <form id="filter_classes">
              <input class="ghosted" data-ghost="Filter Classes" id="filter_classes_q" name="filter_classes_q" type="text" value="Filter Classes" />
            </form>

            <ul id='classlist'>
              
                <li data-name="Nokogiri">
                  <a href="/Nokogiri.html">Nokogiri</a>
                </li>
              
                <li data-name="Nokogiri::CSS">
                  <a href="/Nokogiri/CSS.html">Nokogiri::CSS</a>
                </li>
              
                <li data-name="Nokogiri::CSS::Node">
                  <a href="/Nokogiri/CSS/Node.html">Nokogiri::CSS::Node</a>
                </li>
              
                <li data-name="Nokogiri::CSS::Parser">
                  <a href="/Nokogiri/CSS/Parser.html">Nokogiri::CSS::Parser</a>
                </li>
              
                <li data-name="Nokogiri::CSS::SyntaxError">
                  <a href="/Nokogiri/CSS/SyntaxError.html">Nokogiri::CSS::SyntaxError</a>
                </li>
              
                <li data-name="Nokogiri::CSS::Tokenizer">
                  <a href="/Nokogiri/CSS/Tokenizer.html">Nokogiri::CSS::Tokenizer</a>
                </li>
              
                <li data-name="Nokogiri::CSS::Tokenizer::ScanError">
                  <a href="/Nokogiri/CSS/Tokenizer/ScanError.html">Nokogiri::CSS::Tokenizer::ScanError</a>
                </li>
              
                <li data-name="Nokogiri::Decorators">
                  <a href="/Nokogiri/Decorators.html">Nokogiri::Decorators</a>
                </li>
              
                <li data-name="Nokogiri::Decorators::Slop">
                  <a href="/Nokogiri/Decorators/Slop.html">Nokogiri::Decorators::Slop</a>
                </li>
              
                <li data-name="Nokogiri::EncodingHandler">
                  <a href="/Nokogiri/EncodingHandler.html">Nokogiri::EncodingHandler</a>
                </li>
              
                <li data-name="Nokogiri::HTML">
                  <a href="/Nokogiri/HTML.html">Nokogiri::HTML</a>
                </li>
              
                <li data-name="Nokogiri::HTML::Builder">
                  <a href="/Nokogiri/HTML/Builder.html">Nokogiri::HTML::Builder</a>
                </li>
              
                <li data-name="Nokogiri::HTML::Document">
                  <a href="/Nokogiri/HTML/Document.html">Nokogiri::HTML::Document</a>
                </li>
              
                <li data-name="Nokogiri::HTML::Document::EncodingReader">
                  <a href="/Nokogiri/HTML/Document/EncodingReader.html">Nokogiri::HTML::Document::EncodingReader</a>
                </li>
              
                <li data-name="Nokogiri::HTML::Document::EncodingReader::JumpSAXHandler">
                  <a href="/Nokogiri/HTML/Document/EncodingReader/JumpSAXHandler.html">Nokogiri::HTML::Document::EncodingReader::JumpSAXHandler</a>
                </li>
              
                <li data-name="Nokogiri::HTML::DocumentFragment">
                  <a href="/Nokogiri/HTML/DocumentFragment.html">Nokogiri::HTML::DocumentFragment</a>
                </li>
              
                <li data-name="Nokogiri::HTML::ElementDescription">
                  <a href="/Nokogiri/HTML/ElementDescription.html">Nokogiri::HTML::ElementDescription</a>
                </li>
              
                <li data-name="Nokogiri::HTML::EntityDescription">
                  <a href="/Nokogiri/HTML/EntityDescription.html">Nokogiri::HTML::EntityDescription</a>
                </li>
              
                <li data-name="Nokogiri::HTML::EntityLookup">
                  <a href="/Nokogiri/HTML/EntityLookup.html">Nokogiri::HTML::EntityLookup</a>
                </li>
              
                <li data-name="Nokogiri::HTML::SAX">
                  <a href="/Nokogiri/HTML/SAX.html">Nokogiri::HTML::SAX</a>
                </li>
              
                <li data-name="Nokogiri::HTML::SAX::Parser">
                  <a href="/Nokogiri/HTML/SAX/Parser.html">Nokogiri::HTML::SAX::Parser</a>
                </li>
              
                <li data-name="Nokogiri::HTML::SAX::ParserContext">
                  <a href="/Nokogiri/HTML/SAX/ParserContext.html">Nokogiri::HTML::SAX::ParserContext</a>
                </li>
              
                <li data-name="Nokogiri::HTML::SAX::PushParser">
                  <a href="/Nokogiri/HTML/SAX/PushParser.html">Nokogiri::HTML::SAX::PushParser</a>
                </li>
              
                <li data-name="Nokogiri::SyntaxError">
                  <a href="/Nokogiri/SyntaxError.html">Nokogiri::SyntaxError</a>
                </li>
              
                <li data-name="Nokogiri::XML">
                  <a href="/Nokogiri/XML.html">Nokogiri::XML</a>
                </li>
              
                <li data-name="Nokogiri::XML::Attr">
                  <a href="/Nokogiri/XML/Attr.html">Nokogiri::XML::Attr</a>
                </li>
              
                <li data-name="Nokogiri::XML::AttributeDecl">
                  <a href="/Nokogiri/XML/AttributeDecl.html">Nokogiri::XML::AttributeDecl</a>
                </li>
              
                <li data-name="Nokogiri::XML::Builder">
                  <a href="/Nokogiri/XML/Builder.html">Nokogiri::XML::Builder</a>
                </li>
              
                <li data-name="Nokogiri::XML::CDATA">
                  <a href="/Nokogiri/XML/CDATA.html">Nokogiri::XML::CDATA</a>
                </li>
              
                <li data-name="Nokogiri::XML::CharacterData">
                  <a href="/Nokogiri/XML/CharacterData.html">Nokogiri::XML::CharacterData</a>
                </li>
              
                <li data-name="Nokogiri::XML::Comment">
                  <a href="/Nokogiri/XML/Comment.html">Nokogiri::XML::Comment</a>
                </li>
              
                <li data-name="Nokogiri::XML::DTD">
                  <a href="/Nokogiri/XML/DTD.html">Nokogiri::XML::DTD</a>
                </li>
              
                <li data-name="Nokogiri::XML::Document">
                  <a href="/Nokogiri/XML/Document.html">Nokogiri::XML::Document</a>
                </li>
              
                <li data-name="Nokogiri::XML::DocumentFragment">
                  <a href="/Nokogiri/XML/DocumentFragment.html">Nokogiri::XML::DocumentFragment</a>
                </li>
              
                <li data-name="Nokogiri::XML::Element">
                  <a href="/Nokogiri/XML/Element.html">Nokogiri::XML::Element</a>
                </li>
              
                <li data-name="Nokogiri::XML::ElementContent">
                  <a href="/Nokogiri/XML/ElementContent.html">Nokogiri::XML::ElementContent</a>
                </li>
              
                <li data-name="Nokogiri::XML::ElementDecl">
                  <a href="/Nokogiri/XML/ElementDecl.html">Nokogiri::XML::ElementDecl</a>
                </li>
              
                <li data-name="Nokogiri::XML::EntityDecl">
                  <a href="/Nokogiri/XML/EntityDecl.html">Nokogiri::XML::EntityDecl</a>
                </li>
              
                <li data-name="Nokogiri::XML::EntityReference">
                  <a href="/Nokogiri/XML/EntityReference.html">Nokogiri::XML::EntityReference</a>
                </li>
              
                <li data-name="Nokogiri::XML::Namespace">
                  <a href="/Nokogiri/XML/Namespace.html">Nokogiri::XML::Namespace</a>
                </li>
              
                <li data-name="Nokogiri::XML::Node">
                  <a href="/Nokogiri/XML/Node.html">Nokogiri::XML::Node</a>
                </li>
              
                <li data-name="Nokogiri::XML::Node::SaveOptions">
                  <a href="/Nokogiri/XML/Node/SaveOptions.html">Nokogiri::XML::Node::SaveOptions</a>
                </li>
              
                <li data-name="Nokogiri::XML::NodeSet">
                  <a href="/Nokogiri/XML/NodeSet.html">Nokogiri::XML::NodeSet</a>
                </li>
              
                <li data-name="Nokogiri::XML::Notation">
                  <a href="/Nokogiri/XML/Notation.html">Nokogiri::XML::Notation</a>
                </li>
              
                <li data-name="Nokogiri::XML::PP">
                  <a href="/Nokogiri/XML/PP.html">Nokogiri::XML::PP</a>
                </li>
              
                <li data-name="Nokogiri::XML::PP::CharacterData">
                  <a href="/Nokogiri/XML/PP/CharacterData.html">Nokogiri::XML::PP::CharacterData</a>
                </li>
              
                <li data-name="Nokogiri::XML::PP::Node">
                  <a href="/Nokogiri/XML/PP/Node.html">Nokogiri::XML::PP::Node</a>
                </li>
              
                <li data-name="Nokogiri::XML::ParseOptions">
                  <a href="/Nokogiri/XML/ParseOptions.html">Nokogiri::XML::ParseOptions</a>
                </li>
              
                <li data-name="Nokogiri::XML::ProcessingInstruction">
                  <a href="/Nokogiri/XML/ProcessingInstruction.html">Nokogiri::XML::ProcessingInstruction</a>
                </li>
              
                <li data-name="Nokogiri::XML::Reader">
                  <a href="/Nokogiri/XML/Reader.html">Nokogiri::XML::Reader</a>
                </li>
              
                <li data-name="Nokogiri::XML::RelaxNG">
                  <a href="/Nokogiri/XML/RelaxNG.html">Nokogiri::XML::RelaxNG</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX">
                  <a href="/Nokogiri/XML/SAX.html">Nokogiri::XML::SAX</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX::Document">
                  <a href="/Nokogiri/XML/SAX/Document.html">Nokogiri::XML::SAX::Document</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX::Parser">
                  <a href="/Nokogiri/XML/SAX/Parser.html">Nokogiri::XML::SAX::Parser</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX::Parser::Attribute">
                  <a href="/Nokogiri/XML/SAX/Parser/Attribute.html">Nokogiri::XML::SAX::Parser::Attribute</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX::ParserContext">
                  <a href="/Nokogiri/XML/SAX/ParserContext.html">Nokogiri::XML::SAX::ParserContext</a>
                </li>
              
                <li data-name="Nokogiri::XML::SAX::PushParser">
                  <a href="/Nokogiri/XML/SAX/PushParser.html">Nokogiri::XML::SAX::PushParser</a>
                </li>
              
                <li data-name="Nokogiri::XML::Schema">
                  <a href="/Nokogiri/XML/Schema.html">Nokogiri::XML::Schema</a>
                </li>
              
                <li data-name="Nokogiri::XML::SyntaxError">
                  <a href="/Nokogiri/XML/SyntaxError.html">Nokogiri::XML::SyntaxError</a>
                </li>
              
                <li data-name="Nokogiri::XML::Text">
                  <a href="/Nokogiri/XML/Text.html">Nokogiri::XML::Text</a>
                </li>
              
                <li data-name="Nokogiri::XML::XPath">
                  <a href="/Nokogiri/XML/XPath.html">Nokogiri::XML::XPath</a>
                </li>
              
                <li data-name="Nokogiri::XML::XPath::SyntaxError">
                  <a href="/Nokogiri/XML/XPath/SyntaxError.html">Nokogiri::XML::XPath::SyntaxError</a>
                </li>
              
                <li data-name="Nokogiri::XML::XPathContext">
                  <a href="/Nokogiri/XML/XPathContext.html">Nokogiri::XML::XPathContext</a>
                </li>
              
                <li data-name="Nokogiri::XSLT">
                  <a href="/Nokogiri/XSLT.html">Nokogiri::XSLT</a>
                </li>
              
                <li data-name="Nokogiri::XSLT::Stylesheet">
                  <a href="/Nokogiri/XSLT/Stylesheet.html">Nokogiri::XSLT::Stylesheet</a>
                </li>
              
                <li data-name="Object">
                  <a href="/Object.html">Object</a>
                </li>
              
                <li data-name="XSD">
                  <a href="/XSD.html">XSD</a>
                </li>
              
                <li data-name="XSD::XMLParser">
                  <a href="/XSD/XMLParser.html">XSD::XMLParser</a>
                </li>
              
                <li data-name="XSD::XMLParser::Nokogiri">
                  <a href="/XSD/XMLParser/Nokogiri.html">XSD::XMLParser::Nokogiri</a>
                </li>
              
            </ul>

            <p id="noclassmatch" class="no_results error" style="display: none;">
              No results found. Sorry.
            </p>
          </div>
        </nav>

        
      </div><!-- #sidebar -->

      <article class="column span-15 prepend-1 last">
<div class="tutorial-pagination clearfix">
    <span class="previous"><a href="/tutorials/installing_nokogiri.html">Installing Nokogiri</a></span>
    <span class="next"><a href="/tutorials/searching_a_xml_html_document.html">Searching an HTML / XML Document</a></span>
</div>

<div class="tutorial">
  <h1 id="parsing_an_html__xml_document">Parsing an HTML / XML Document</h1>

<h2 id="from_a_string">From a String</h2>

<p>We’ve tried to make this easy on you. Really! We’re here to make your life easier.</p>

<pre><code>html_doc = Nokogiri::HTML("&lt;html&gt;&lt;body&gt;&lt;h1&gt;Mr. Belvedere Fan Club&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;")
xml_doc  = Nokogiri::XML("&lt;root&gt;&lt;aliens&gt;&lt;alien&gt;&lt;name&gt;Alf&lt;/name&gt;&lt;/alien&gt;&lt;/aliens&gt;&lt;/root&gt;")</code></pre>

<p>The variables <code>html_doc</code> and <code>xml_doc</code> are Nokogiri documents, which have all kinds of interesting properties and methods that you <a href="http://nokogiri.org/Nokogiri/XML/Document.html">can read about here</a>. We’ll cover the interesting bits in other chapters.</p>

<h2 id="from_a_file">From a File</h2>

<p>Note that you don’t need to read the file into a string variable. Nokogiri will do this for you.</p>

<pre><code>f = File.open("blossom.xml")
doc = Nokogiri::XML(f)
f.close</code></pre>

<p>Clever Nokogiri! With the time you just saved, approach enlightenment by meditating on <a href="http://twitter.com/rjw1/status/2741916767">this koan</a>.</p>

<h2 id="from_the_internets">From the Internets</h2>

<p>I understand that there may be some HTML documents available on the World Wide Web.</p>

<pre><code>require 'open-uri'
doc = Nokogiri::HTML(open("http://www.threescompany.com/"))</code></pre>

<h2 id="parse_options">Parse Options</h2>

<p>Nokogiri offers quite a few options that affect how a document is parsed. You can <a href="http://nokogiri.org/Nokogiri/XML/ParseOptions.html">read about them here</a>, but the most commonly-used options are:</p>

<ul>
<li>
<code>NOBLANKS</code> - Remove blank nodes</li>

<li>
<code>NOENT</code> - Substitute entities</li>

<li>
<code>NOERROR</code> - Suppress error reports</li>

<li>
<code>STRICT</code> - Strict parsing; raise an error when parsing malformed documents</li>

<li>
<code>NONET</code> - Prevent any network connections during parsing. Recommended for parsing untrusted documents.</li>
</ul><p>Here’s how they are used:</p>

<pre><code>doc = Nokogiri::XML(File.open("blossom.xml")) do |config|
  config.strict.nonet
end</code></pre>

<p>Or</p>

<pre><code>doc = Nokogiri::XML(File.open("blossom.xml")) do |config|
  config.options = Nokogiri::XML::ParseOptions.STRICT | Nokogiri::XML::ParseOptions.NONET
end</code></pre>

<h2 id="encoding">Encoding</h2>

<p>Strings are always stored as UTF-8 internally. Methods that return text values will always return UTF-8 encoded strings. Methods that return XML (like to_xml, to_html and inner_html) will return a string encoded like the source document.</p>

<p><strong>WARNING</strong></p>

<p>Some documents declare one particular encoding, but use a different one. So, which encoding should the parser choose?</p>

<p>Remember that data is just a stream of bytes. Only us humans add meaning to that stream. Any particular set of bytes could be valid characters in multiple encodings, so detecting encoding with 100% accuracy is not possible. libxml2 does its best, but it can’t be right 100% of the time.</p>

<p>If you want Nokogiri to handle the document encoding properly, your best bet is to explicitly set the encoding. Here is an example of explicitly setting the encoding to EUC-JP on the parser:</p>

<pre><code>doc = Nokogiri.XML('&lt;foo&gt;&lt;bar /&gt;&lt;foo&gt;', nil, 'EUC-JP')</code></pre>
</div>
<div class="tutorial-pagination clearfix">
    <span class="previous"><a href="/tutorials/installing_nokogiri.html">Installing Nokogiri</a></span>
    <span class="next"><a href="/tutorials/searching_a_xml_html_document.html">Searching an HTML / XML Document</a></span>
</div>


      </article>

      <footer class="column span-24">
        <p class="alt"><abbr title="eXtensible Markup Language">XML</abbr> is like violence &mdash; if it doesn’t solve your problems, you are not using enough of it</p>
      </footer>

    </div><!-- .container -->
  </body>
</html>